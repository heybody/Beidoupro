/*************************************************************************************************************
*                                              INCLUDE FILES                                                 *
*************************************************************************************************************/
#include <crc.h>


/*************************************************************************************************************
*                                                CONSTANTS                                                   *
*************************************************************************************************************/
const unsigned short CRC16Table[16] =
{
    0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50A5, 0x60C6, 0x70E7,
    0x8108, 0x9129, 0xA14A, 0xB16B, 0xC18C, 0xD1AD, 0xE1CE, 0xF1EF
};


/*************************************************************************************************************
*                                            FUNCTION PROTOTYPES                                             *
*************************************************************************************************************/
unsigned short GetCRC16 (const unsigned char *pdata, unsigned short len)
{
    unsigned short val;
    unsigned char tmp;
    unsigned short i;
        
    val = 0xFFFF;
        
    for (i = 0; i < len; i++)
    {
        tmp = val >> 12; 
        val <<= 4; 
        val ^= CRC16Table[tmp ^ (*pdata / 16)]; 
                
        tmp = val >> 12; 
        val <<= 4; 
        val ^= CRC16Table[tmp ^ (*pdata & 0x0F)]; 
        pdata++;
    }
     
    return val;
}


/*************************************************************************************************************
*                                               MODULE END                                                   *
*************************************************************************************************************/
