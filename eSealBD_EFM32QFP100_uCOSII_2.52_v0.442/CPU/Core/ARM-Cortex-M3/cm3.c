/*************************************************************************************************************
*                                              INCLUDE FILES                                                 *
*************************************************************************************************************/
#include <cpu.h>

#include <cm3.h>


/*************************************************************************************************************
*                                                VARIABLES                                                   *
*************************************************************************************************************/
static volatile CPU_INT32U SysTickTimimgDelay;


/*************************************************************************************************************
*                                            FUNCTION PROTOTYPES                                             *
*************************************************************************************************************/
void SysTickInit (CPU_INT32U cnts)
{
    CM3_SYSTICK->LOAD = cnts - 1u;
    CM3_SYSTICK->CTRL |= CM3_SYSTICK_CTRL_CLK_SRC | CM3_SYSTICK_CTRL_ENABLE;
    CM3_SYSTICK->CTRL |= CM3_SYSTICK_CTRL_INTEN;
}

void SysTickDelay (CPU_INT32U t)
{ 
    SysTickTimimgDelay = t;

    while (SysTickTimimgDelay != 0);
}

void SysTickTimimg (void)
{
    if (SysTickTimimgDelay != 0)
    { 
        SysTickTimimgDelay--;
    }
}


/*************************************************************************************************************
*                                                  END FILE                                                  *
*************************************************************************************************************/
